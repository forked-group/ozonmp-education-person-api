–ó–∞–¥–∞–Ω–∏–µ 2

+ –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ {domain-kw}-{subdomain}-api

+ –û–ø–∏—Å–∞—Ç—å —Å—É—â–Ω–æ—Å—Ç—å {domain}.{Subdomain} –∏ {domain}.{Subdomain}Event –≤ internal/model/{subdomain}.go

+ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω consumer-producer –∏–∑ db –≤ kafka –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ EventRepo –∏ EventSender –¥–ª—è –æ–¥–Ω–æ–≥–æ
  —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è Created

+ –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã

+ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Ä–∞–±–æ—Ç—ã –ø–æ—Ç–æ–∫–æ–≤ —Å–¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ context üíé

+ –°–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ —É workerpool –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–∞—Ç—á–µ–≤—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–ø–∏—Å–µ–π —Å–æ–±—ã—Ç–∏–π üíé

- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π —É—á–∏—Ç—ã–≤–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ üíé

    –í –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è id —Å–æ–±—ã—Ç–∏–π –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º
    –ø–æ—Ä—è–¥–∫–µ...
    –ù–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –ø–æ–¥–∞–≤–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è.
    –ó–∞–ø–æ–º–∏–Ω–∞—Ç—å id –∑–∞–ø–∏—Å–∏ —Å id —Å–æ–±—ã—Ç–∏—è, –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –æ—à–∏–±–∫–æ–π.
    –û—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å (–≤ unlock) —Å–æ–±—ã—Ç–∏—è –¥–ª—è —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏ —Å –±–æ–ª—å—à–∏–º id, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ...
    Oops!.. –∏ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –≤—Å–µ id –Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –¥–ª—è —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏ –≤ –æ—á–µ—Ä–µ–¥—å..., –≤—ã–±–∏—Ä–∞—Ç—å –ø–æ –º–µ—Ä–µ –æ—Ç–ø—Ä–∞–≤–∫–∏...

    (!) –ù–µ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ —Ä–∞–∑—Ä—É–ª–∏—Ç—å —Ç–æ–ª–∫—É—á–∫—É Consumers –ø–µ—Ä–µ–¥ Distributor, –≥–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∞ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è.

    (!) –ö–∞–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—é –Ω–∞ –≤—Ö–æ–¥–µ?.. –î–∞–∂–µ –µ—Å–ª–∏ –±–∞—Ç—á–∏ –≥–µ–Ω–µ—Ä—è—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø–æ–ª—É—á–∏—Ç—å –º—ã –∏—Ö –º–æ–∂–µ–º –≤
    —á—É—Ç—å (–∞ –º–æ–∂–µ—Ç –Ω–µ —á—É—Ç—å) —Å–±–∏–≤—à–µ–º—Å—è –ø–æ—Ä—è–¥–∫–µ. –ú–º–º... –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –º—ã –º–æ–∂–µ–º –æ—Å—É—à–∏–≤ –±–∞–∑—É –æ—Ç —Å–æ–±—ã—Ç–∏–π
    –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ –ø–∞–º—è—Ç–∏. Imho –Ω–µ –Ω–∞—à –ø—É—Ç—å...

    –í–æ–π–Ω–∞ —Ñ–∏–≥–Ω—è! –ù—É–∂–Ω–æ –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å dummyRepo, —á—Ç–æ–±—ã –≤—ã–¥–∞–≤–∞–ª —Å–æ–±—ã—Ç–∏—è –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é. –ö—É—á–∞ –Ω–∞–º –ø–æ–º–æ–∂–µ—Ç (+done)...
    nil –≤ –ø–æ–ª–µ –∑–∞–ø–∏—Å–∏ —É–∂–µ –Ω–µ –∫–∞—Ç–∏—Ç... –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã... –ò –¥—É–º–∞—Ç—å, –∫–∞–∫ —ç—Ç–æ —Ä–∞–∑—Ä—É–ª–∏—Ç—å...

    –ú–¥–∞... —É –Ω–∞—Å –∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä–æ–≤, –Ω–µ –≥–¥–µ –Ω–µ —Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ.
    –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –∫—Ç–æ —Å–∫–∞–∑–∞–ª —á—Ç–æ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ? –ö–∞–∫ —ç—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±–∞–∑—ã?

    –í –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∑–∞–ø–∏—Å–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –Ω–∞ –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å...

    –°–¢–û–ü! –õ–∏–±–æ —è –Ω–µ –ø–æ–Ω–∏–º–∞—é –∑–∞–¥–∞–Ω–∏—è. –õ–∏–±–æ –ø—É—Å—Ç—å –º–µ–Ω—è –Ω–∞—É—á–∞—Ç.

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏ At-least-once üíé

    –ú–º–º... –ø–æ–∫–∞ –≤–∏–∂—É —Ç–æ–ª—å–∫–æ –º–µ—Ç–∏—Ç—å –∑–∞–ª–æ—á–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è timestamp'–æ–º. –ï—Å–ª–∏ –º–µ—Ç–∫–∞ –ø—Ä–æ—Ç—É—Ö–ª–∞, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∏—Ö –≤ Deferred.
    –ù—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –±–∞–∑—ã...

    –ï—Å–ª–∏ –∏–º–µ–ª–æ—Å—å –≤–≤–∏–¥—É "–∫—Ä–∞—Å–∏–≤–æ–µ" –∑–∞–∫—Ä—ã—Ç–∏–µ Retranslator'–∞, —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º "—Å–ª–∏–≤–æ–º" –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π,
    —Ç–æ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç CloseCtx(context.Background()). –û–Ω –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –≤—Å–µ
    –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.

    –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏ Jobs –Ω–∞ Workers?.. –°–µ–π—á–∞—Å –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é, –≤ –Ω–∞–¥–µ–∂–¥–µ, —á—Ç–æ –ø—Ä–µ–¥—ã–¥—É—â–∏ –ø—É–Ω–∫—Ç –º–æ–∂–Ω–æ –∫—Ä–∞—Å–∏–≤–æ
    —Ä–∞–∑—Ä—É–ª–∏—Ç—å. –ú–æ–∂–Ω–æ —Ä–µ—Ç—Ä–µ–∏—Ç—å –¥–æ –ø–æ–±–µ–¥–Ω–æ–≥–æ... –∏–ª–∏ —É–ø–∞–ª–∞ –±–∞–∑–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–¥ –ø–æ–¥—ä–µ–º–æ–º –≤—Å–µ –≤ Deferred.

- –ù–∞–π—Ç–∏ —Å–∫—Ä—ã—Ç—ã–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ üíé

    –ù–µ –¥–æ –≥—Ä–∏–±–æ–≤. –ï—Å–ª–∏, —á—Ç–æ –º–Ω–µ –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–æ–º. –í–∏–¥–∏–º–æ,
    –æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω, —á—Ç–æ–±—ã Consumers –Ω–µ —Ç–æ–ª–ø–∏–ª–∏—Å—å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–µ. –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –æ–Ω–∏ –±—É–¥—É—Ç
    –∑–¥–µ—Å—å –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –∑–¥–µ—Å—å –∫–∞–∂–¥—ã–º –±—É–¥–µ—Ç O(n), –≥–¥–µ n –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Consumers.
    –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –Ω–µ —Ä–µ—à–∞–µ—Ç, –∞ –æ—Ç–æ–¥–≤–∏–≥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É. –ù—É–∂–µ–Ω Distributor, –∫–æ—Ç–æ—Ä—ã–π –∑–∞ —Ä–∞–∑
    –±—É–¥–µ—Ç –∑–∞–±–∏—Ä–∞—Ç—å –≤—Å–µ, —á—Ç–æ –ø—Ä–∏–Ω–µ—Å Consumer.
